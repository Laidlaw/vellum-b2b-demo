// Professional B2B Product Image Mapping System
// Curated, reliable images for consistent demo presentation

export type ProductImageMapping = {
  [key: string]: string;
};

// High-quality, professional product images from reliable CDNs
export const CURATED_PRODUCT_IMAGES: ProductImageMapping = {
  // Safety Equipment
  'Steel Toe Work Boots': 'https://images.unsplash.com/photo-1544966503-7cc5ac882d5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'High-Visibility Safety Vest': 'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Hard Hat with LED Light': 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Cut-Resistant Work Gloves': 'https://images.unsplash.com/photo-1585435557343-3b092031c4fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Safety Lockout Kit': 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Fire Extinguisher': 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Respirator Face Mask': 'https://images.unsplash.com/photo-1584483766114-2cea6facdf57?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Safety Eyewear': 'https://images.unsplash.com/photo-1574633148958-cf89e23f7e85?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',

  // Power Tools  
  'Cordless Drill Kit': 'https://images.unsplash.com/photo-1572981779307-38b8cabb2407?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Industrial Generator': 'https://images.unsplash.com/photo-1513828583688-c52646db42da?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'MIG Welding Machine': 'https://images.unsplash.com/photo-1504328345606-18bbc8c9d7d1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Angle Grinder': 'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Circular Saw': 'https://images.unsplash.com/photo-1563453392212-326f5e854473?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',

  // Hand Tools
  'Impact Socket Set': 'https://images.unsplash.com/photo-1609205053040-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Digital Multimeter': 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Professional Hammer Set': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Adjustable Wrenches': 'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',

  // Storage & Organization
  'Industrial Wire Shelving': 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Tool Storage Cabinet': 'https://images.unsplash.com/photo-1581847850834-6c17ef07abaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Heavy-Duty Workbench': 'https://images.unsplash.com/photo-1581783898377-1c85bf937427?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Industrial Storage Bins': 'https://images.unsplash.com/photo-1586473219010-2ffc57b0d282?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',

  // Automotive & Lifting
  'Hydraulic Floor Jack': 'https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Heavy-Duty Lifting Straps': 'https://images.unsplash.com/photo-1581093458791-9d42a10c8e5a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Industrial Crane Scale': 'https://images.unsplash.com/photo-1581092162384-8987c1d64718?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Engine Hoist': 'https://images.unsplash.com/photo-1580273916550-e323be2ae537?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',

  // Additional B2B Products - Common Industrial Items
  'Hammer Drill': 'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Impact Driver': 'https://images.unsplash.com/photo-1572981779307-38b8cabb2407?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Miter Saw': 'https://images.unsplash.com/photo-1563453392212-326f5e854473?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Table Saw': 'https://images.unsplash.com/photo-1563453392212-326f5e854473?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Reciprocating Saw': 'https://images.unsplash.com/photo-1563453392212-326f5e854473?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Belt Sander': 'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Orbital Sander': 'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Router': 'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Planer': 'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Nailer': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Stapler': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  
  // Hand Tools
  'Combination Wrench Set': 'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Torque Wrench': 'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Ratchet Set': 'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Screwdriver Set': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Hex Key Set': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Pliers Set': 'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Wire Strippers': 'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Utility Knife': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Measuring Tape': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Level Set': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',

  // Test Equipment
  'Clamp Meter': 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Oscilloscope': 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Function Generator': 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Power Supply': 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Insulation Tester': 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',

  // Safety Equipment Variants
  'Composite Toe Safety Boots': 'https://images.unsplash.com/photo-1544966503-7cc5ac882d5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Waterproof Work Boots': 'https://images.unsplash.com/photo-1544966503-7cc5ac882d5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Reflective Traffic Vest': 'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Class 3 Safety Vest': 'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Electrical Hard Hat': 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Climbing Hard Hat': 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Bump Cap': 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
};

// Fallback images by category for unmapped products
export const CATEGORY_FALLBACK_IMAGES = {
  'Safety Equipment': 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Power Tools': 'https://images.unsplash.com/photo-1572981779307-38b8cabb2407?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Hand Tools': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Storage': 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Storage Solutions': 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Testing Equipment': 'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Maintenance Supplies': 'https://images.unsplash.com/photo-1581847850834-6c17ef07abaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Automotive Equipment': 'https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
  'Material Handling': 'https://images.unsplash.com/photo-1581093458791-9d42a10c8e5a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
} as const;

// Smart image selector - guaranteed to return a working image URL (no placeholders)
export function getProductImage(productName: string, category: string, productId: string): string {
  // First priority: Curated product-specific image
  if (CURATED_PRODUCT_IMAGES[productName]) {
    return CURATED_PRODUCT_IMAGES[productName];
  }

  // Second priority: Category fallback with cycling variety
  const categoryImages = getCategoryImagePool(category);
  if (categoryImages.length > 0) {
    // Use product ID to consistently select the same image for the same product
    const imageIndex = hashString(productId) % categoryImages.length;
    return categoryImages[imageIndex];
  }

  // Third priority: Cycle through ALL available images from any category
  const allImages = getAllImagePool();
  const imageIndex = hashString(productId) % allImages.length;
  return allImages[imageIndex];
}

// Get a pool of images for each category by cycling through related curated images
function getCategoryImagePool(category: string): string[] {
  const pools: Record<string, string[]> = {
    'Safety Equipment': [
      'https://images.unsplash.com/photo-1544966503-7cc5ac882d5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1585435557343-3b092031c4fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1574633148958-cf89e23f7e85?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Power Tools': [
      'https://images.unsplash.com/photo-1572981779307-38b8cabb2407?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1563453392212-326f5e854473?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1513828583688-c52646db42da?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Hand Tools': [
      'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1609205053040-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Storage': [
      'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1581847850834-6c17ef07abaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1586473219010-2ffc57b0d282?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Storage Solutions': [
      'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1581847850834-6c17ef07abaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1586473219010-2ffc57b0d282?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Testing Equipment': [
      'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Test Equipment': [
      'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Maintenance Supplies': [
      'https://images.unsplash.com/photo-1581847850834-6c17ef07abaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Automotive Equipment': [
      'https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1580273916550-e323be2ae537?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ],
    'Material Handling': [
      'https://images.unsplash.com/photo-1581093458791-9d42a10c8e5a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
      'https://images.unsplash.com/photo-1581092162384-8987c1d64718?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
    ]
  };

  return pools[category] || pools['Hand Tools'] || [];
}

// Get all available images for ultimate fallback - ensures 100% coverage
function getAllImagePool(): string[] {
  return [
    // All curated product images
    ...Object.values(CURATED_PRODUCT_IMAGES),
    // All category pool images (deduplicated)
    'https://images.unsplash.com/photo-1544966503-7cc5ac882d5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1504307651254-35680f356dfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1585435557343-3b092031c4fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1572981779307-38b8cabb2407?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1609205053014-3e6fc9fb2bce?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1563453392212-326f5e854473?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1513828583688-c52646db42da?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1519737551449-c6b8d0aa7e93?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1581847850834-6c17ef07abaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1581092160562-40aa08e78837?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1519641471654-76ce0107ad1b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80',
    'https://images.unsplash.com/photo-1581093458791-9d42a10c8e5a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80'
  ];
}

// Simple hash function to consistently map product IDs to image indices
function hashString(str: string): number {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    const char = str.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash; // Convert to 32bit integer
  }
  return Math.abs(hash);
}

// Get CSS blur effect - consistent across all product images to focus on B2B functionality
export function getImageVariation(productId: string): { filter?: string; opacity?: number } {
  // Apply consistent blur to all images to focus attention on product details, pricing, and B2B features
  return {
    filter: 'blur(3px) brightness(1.1) saturate(0.8)',
    opacity: 0.9
  };
}

// Generate image component props for consistent styling
export function getImageProps(productName: string, category: string, productId: string) {
  return {
    src: getProductImage(productName, category, productId),
    alt: productName,
    style: {
      width: '100%',
      height: '100%',
      objectFit: 'cover' as const,
      ...getImageVariation(productId)
    }
  };
}

// Alternative: Professional industrial placeholder
export function getIndustrialPlaceholder(productName: string, category: string): string {
  const shortName = productName.slice(0, 18);
  const categoryColor = getCategoryColor(category);
  return `https://via.placeholder.com/400x400/${categoryColor}/ffffff?text=${encodeURIComponent(shortName)}`;
}

// Get category-specific colors for professional appearance
function getCategoryColor(category: string): string {
  const categoryColors = {
    'Safety Equipment': '27ae60',    // Green for safety
    'Power Tools': 'e74c3c',        // Red for power  
    'Hand Tools': '3498db',         // Blue for precision
    'Storage': '95a5a6',           // Gray for storage
    'Storage Solutions': '95a5a6',
    'Testing Equipment': '9b59b6',  // Purple for testing
    'Maintenance Supplies': 'f39c12', // Orange for maintenance
    'Automotive Equipment': '34495e', // Dark blue for automotive
    'Material Handling': '16a085'   // Teal for handling
  };

  return categoryColors[category as keyof typeof categoryColors] || '2c3e50';
}